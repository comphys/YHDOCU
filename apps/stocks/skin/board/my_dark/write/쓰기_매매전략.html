{% extends D['_skn'] + 'board/my_dark/main_layout.html' %}

{% block contents_write %}
<form id='YHBmainEditorForm' method="POST" action="{{D['Form_act']}}" onsubmit='return check_MainWriteForm(this)' >
<input type='hidden' name='mode'	value="{{D['Mode']}}" >
<input type='hidden' name='uid'		value="{{D['USER']['uid']}}" >
<input type='hidden' name='uname'	value="{{D['USER']['uname']}}" >
<textarea  name='content' style="display:none"></textarea>
<table class='table' style="border:2px solid black;border-radius:4px;width:{{D['w_width2']}}">
	<tbody>
	<!-- 상단 요소====================================================================================== -->
	<tr>
		<td class='write-td-left'>기본사항</td>
		<td class='write-td-right'>
			<select name="add1" class="i-input-div-must">
				<option value="">베이스 전략 선택</option>
				{% for val in D['base_strategy'] %}
				<option value="{{val}}" {{ 'selected' if D['BODY']['add1'] == val else '' }}>{{val}}</option>
				{% endfor %}
			</select>

			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;">타이틀</div>
				<input type='text' name='add0' class="i-text" style="width:200px;text-align:center" value="{{D['BODY']['add0']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;">분할횟수</div>
				<input type='text' name='add3' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add3']}}">
			</div>
			
		</td>
	</tr>
	<tr><td colspan="2" style="font-size:2px;line-height:5px;background-color: rgb(1, 2, 19);">&nbsp;</td></tr>
	<tr>
		<td class='write-td-left'>매수설정</td>
		<td class='write-td-right'>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">평단가 비중(%)</div>
				<input type='text' name='add4' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add4']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">평단가 가치(%)</div>
				<input type='text' name='add5' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add5']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">큰단가 가치(%)</div>
				<input type='text' name='add6' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add6']}}">
			</div>
		</td>
	</tr>
	<tr><td colspan="2" style="font-size:2px;line-height:5px;background-color: rgb(1, 2, 19);">&nbsp;</td></tr>
	<tr>
		<td class='write-td-left'>매도설정</td>
		<td class='write-td-right'>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">첫매도 비중(%)</div>
				<input type='text' name='add7' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add7']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">첫매도 가치(%)</div>
				<input type='text' name='add8' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add8']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">둘매도 가치(%)</div>
				<input type='text' name='add9' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add9']}}">
			</div><br>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">대기 횟수</div>
				<input type='text' name='add19' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add19']}}">
			</div>
		</td>
	</tr>
	<tr><td colspan="2" style="font-size:2px;line-height:5px;background-color: rgb(1, 2, 19);">&nbsp;</td></tr>
	<tr>
		<td class='write-td-left'>강매설정<br>위기극복</td>
		<td class='write-td-right'>	
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">횟수제한</div>
				<input type='text' name='add10' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add10']}}">
			</div>	
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">자본제한(%)</div>
				<input type='text' name='add11' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add11']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">강매도 가치(%)</div>
				<input type='text' name='add12' class="i-text" style="width:48px;text-align:center" value="{{D['BODY']['add12']}}">
			</div><br>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">매수허용</div>
				<input type='checkbox' id='can_buy' style="width:48px;margin-top:7px" {{ 'checked' if D['BODY']['add16'] =='on' else '' }} >
				<input type='hidden'   name='add16' >
			</div>	
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">현재추종</div>
				<input type='checkbox' id='can_cur' style="width:48px;margin-top:7px" {{ 'checked' if D['BODY']['add17'] =='on' else '' }} >
				<input type='hidden'   name='add17' >				
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:120px">과거추종</div>
				<input type='checkbox' id='can_old' style="width:48px;margin-top:7px" {{ 'checked' if D['BODY']['add18'] =='on' else '' }} >
				<input type='hidden'   name='add18' >			
			</div>
		</td>
	</tr>
	<tr><td colspan="2" style="font-size:2px;line-height:5px;background-color: rgb(1, 2, 19);">&nbsp;</td></tr>
	<tr>
		<td class='write-td-left'>종가추종</td>
		<td class='write-td-right'>	
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:35px">5%</div>
				<input type='text' id='sub5' class="i-text" style="width:20px;text-align:center" value="{{D['BODY']['sub5']}}">
			</div>		
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:35px">6%</div>
				<input type='text' id='sub6' class="i-text" style="width:20px;text-align:center" value="{{D['BODY']['sub6']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:35px">7%</div>
				<input type='text' id='sub7' class="i-text" style="width:20px;text-align:center" value="{{D['BODY']['sub7']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:35px">8%</div>
				<input type='text' id='sub8' class="i-text" style="width:20px;text-align:center" value="{{D['BODY']['sub8']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:35px">9%</div>
				<input type='text' id='sub9' class="i-text" style="width:20px;text-align:center" value="{{D['BODY']['sub9']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:35px">10%</div>
				<input type='text' id='sub10' class="i-text" style="width:20px;text-align:center" value="{{D['BODY']['sub10']}}">
			</div>
			<div class='i-input-div'>
				<div class='write-input-left' style="background-color:#333F4F;width:35px">11%</div>
				<input type='text' id='sub11' class="i-text" style="width:20px;text-align:center" value="{{D['BODY']['sub11']}}">
			</div>
			<select name="add14" class="i-input-div-choice" style="width:100px">
				<option value="">추종방식</option>
				<option value="추종안함" {{ 'selected' if D['BODY']['add14'] == '추종안함' else '' }}>추종안함</option>
				<option value="현재추종" {{ 'selected' if D['BODY']['add14'] == '현재추종' else '' }}>현재추종</option>
				<option value="과거추종" {{ 'selected' if D['BODY']['add14'] == '과거추종' else '' }}>과거추종</option>
				<option value="복합추종" {{ 'selected' if D['BODY']['add14'] == '복합추종' else '' }}>복합추종</option>
			</select>
			<input type='hidden' name='add15' value="{{D['BODY']['add15']}}" >
		</td>
	</tr>
	<tr><td colspan="2" style="font-size:2px;line-height:5px;background-color: rgb(1, 2, 19);">&nbsp;</td></tr>
	<tr>
		<td class='write-td-left'>전략설명</td>
		<td class='write-td-right'>
			<input type="text" name="add2" value="{{D['BODY']['add2']}}" style="width:100%">
		</td>
	</tbody>
</table>
<div style="width:{{D['w_width2']}}">
{% include D['_skn'] + 'board/my_dark/write/basic_editor_tools.htm' %}
</div>
<!-- BEGIN ====================================================================================== -->
<div style="position:relative;width:{{D['w_width1']}}">
<div id="selectedMarkL"></div>	
<div id="write-wrap" style="float:left;width:{{D['w_width2']}};z-index:3">
<div id="YHBmainEditor">
{% if D['Mode'] == 'modify' -%} 
{{D['OBODY']['content']|safe}}
{%- endif %}
</div><!-- YHBmainEditor  -->
<!-- 하단 요소====================================================================================== -->
		<div class="clearfix" style="padding:0px;border-top:1px solid black;background-color:#393E4A">
			<div id="TAG_STRUCTURE" class="pull-left" style="padding:0px 15px"></div>
			<div class="pull-right">
				<span class="btn-transparent" onclick="$('#YHBmainEditorForm').submit()"><i class="fa fa-circle-o" style="font-size:20px;color:#0099ff;margin:2px 0" title="저장"></i></span>
				<a href="{{D['_bse']}}board/list/{{D['bid']}}/csh=on"><i class="fa fa-circle-o" style="font-size:20px;color:#a66c39;margin:2px 0" title="취소"></i></a>&nbsp;&nbsp;
			</div>
		</div>
	</div><!-- write-wrap  -->
<div id="choicedMark"   style="left:{{D['w_width2']}}"></div>
<div id="selectedMarkR" style="left:{{D['w_width2']}}"></div>	

</div>
<!-- END ====================================================================================== -->
</form>
{% include D['_skn'] + 'board/my_dark/write/side_editor_tools.htm' %}

<!-- 표관련 메뉴 -->
<div id='tableMenu' class="rightClickMenu" style='display:none;'>
	<li onclick="$('#tableMenu').hide()"> 메뉴감추기 </li>
	<li class='divider'></li>
	<li onclick="JYHEDITOR.addRowCol('left')">좌측컬럼 추가</li>
	<li onclick="JYHEDITOR.addRowCol('right')">우측컬럼 추가</li>
	<li class='divider'></li>
	<li onclick="JYHEDITOR.addRowCol('up')">위쪽행 추가</li>
	<li onclick="JYHEDITOR.addRowCol('down')">아래행 추가</li>
	<li class='divider'></li>
	<li onclick="JYHEDITOR.addRowCol('col')">현재컬럼 삭제</li>
	<li onclick="JYHEDITOR.addRowCol('row')">현재 행 삭제</li>
</div>


<script>
function form_basic(opt) {
	var html;
	$('#contextMenu').hide()
	switch (opt){
		case  'A1'  : html= '\n<div class="pbox">\n<p>글입력</p>\n</div>\n'; break;	
		case  'A2'  : html= '\n<div class="pbox">\n<p class="p-title">타이틀</p>\n<p class="sbox">\n글내용\n</p>\n</div>\n'; break;
		case  'B1'  : html= '\n<p class="p-title">타이틀</p>\n<p class="sbox">\n글내용\n</p>\n'; break;
		case  'A4h' : html= '\n<div class="A4h">\n<p>글내용</p>\n</div>\n'; break;
		case  'A4w' : html= '\n<div class="A4w">\n글내용\n</div>\n'; break;
	}
	if(docuSelected != null) { $(docuSelected).before(html); JYHEDITOR.selectedMark();} 
	else $("#YHBmainEditor").append(html); 
	
}

JYHEDITOR.UserTable = function() {
	if(docuSelectedType != 'TD') return;
	$("#tableMenu").css({left:mouse_X - 20 , top:mouse_Y }).toggle();
}

JYHEDITOR.start('YHBmainEditor');

function check_MainWriteForm(f)	{	
	var wDiv = $id("YHBmainEditor");
	JYHEDITOR.clearDocuSelect();
	f.content.value = wDiv.innerHTML;
	if(check_FormInput(f,{{D['ChkField']|safe}})) return false;
	var add15=''
	for(i=5;i<12;i++)
	{
		add15 += $("#sub"+i).val() + '/';
	}
	$("input[name='add15']").val(add15)
	if($("#can_buy").prop('checked')) $("input[name='add16']").val('on') ; else $("input[name='add16']").val('off') ;
	if($("#can_cur").prop('checked')) $("input[name='add17']").val('on') ; else $("input[name='add17']").val('off') ;
	if($("#can_old").prop('checked')) $("input[name='add18']").val('on') ; else $("input[name='add18']").val('off') ;
	return true;
}
</script>
{% endblock %}