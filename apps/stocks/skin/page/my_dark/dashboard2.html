{% extends D['_skn'] + 'page/my_dark/main_layout_mobile.html' %}

{% block contents_page  %}
<script src="/sys/chart/chart.min.js"></script>
<script src="/sys/chart/chartjs-plugin-datalabels.min.js"></script>


<div class="clearfix" style="width:100%;background-color:#24272d;padding:20px;border:2px solid black;">
	<div class="pull-left" style="margin-right:20px">
		<canvas id="myChart"  style="width:1100px;height:350px;background-color:#24272d;"></canvas>
	</div>
	<div class="pull-left">
		<canvas id="myChart2" style="width:310px;height:350px;background-color:#24272d"></canvas>
	</div>
</div>
<div class="row-row clearfix" style="margin-bottom:-2px;"> 
	<div class='well'>
		<i class="fa fa-calendar"></i> {{D['오늘날자']}}({{D['오늘요일']}}) &nbsp;
	</div> 
</div>

<div class="row-row clearfix">
	<table class='table table-bordered table-striped table-hover'>
		<thead>
			<tr>
				<th style="background-color:#071418;font-style:italic">My</th>
				<th colspan='4' style="background-color:#0A2229;font-style:italic">종합현황</th>

				<th colspan='7' style="background-color:#0B2F3A;font-style:italic">진행현황</th>

				<th colspan='3' style="background-color:#0A2229;font-style:italic">매매전략1</th>

				<th colspan='3' style="background-color:#0A2229;font-style:italic">매매전략2</th>

			</tr>
			<tr>
				<th style="background-color:#071418;font-style:italic">Account</th>
				<th style="background-color:#0A2229;text-align:right">기초자금</th>
				<th style="background-color:#0A2229;text-align:right">현재자금</th>
				<th style="background-color:#0A2229;text-align:right">증감</th>
				<th style="background-color:#0A2229;text-align:right">수익률</th>

				<th style="background-color:#0B2F3A;text-align:right">시즌</th>
				<th style="background-color:#0B2F3A;text-align:right">진행률</th>
				<th style="background-color:#0B2F3A;text-align:right">수량</th>
				<th style="background-color:#0B2F3A;text-align:right">평균단가</th>
				<th style="background-color:#0B2F3A;text-align:right">수익률</th>
				<th style="background-color:#0B2F3A;text-align:right">평가금액</th>
				<th style="background-color:#0B2F3A;text-align:right">가용잔액</th>

				<th style="background-color:#0A2229;text-align:right">전략</th>
				<th style="background-color:#0A2229;text-align:right">수량</th>
				<th style="background-color:#0A2229;text-align:right">가격</th>
				<th style="background-color:#0A2229;text-align:right">전략</th>
				<th style="background-color:#0A2229;text-align:right">수량</th>
				<th style="background-color:#0A2229;text-align:right">가격</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td style="text-align:center;">첫째계좌</td>
				<td style="text-align:right;">{{D['첫째상황'][0]}}</td>
				<td style="text-align:right;">{{D['첫째상황'][1]}}</td>
				<td style="text-align:right;">{{D['첫째상황'][2]|safe}}</td>
				<td style="text-align:right;">{{D['첫째상황'][3]|safe}}</td>
				<td style="text-align:right;">{{D['첫째상황'][4]}}</td>
				<td style="text-align:right;">{{D['첫째상황'][5]}}</td>
				<td style="text-align:right;">{{D['첫째상황'][6]}}</td>
				<td style="text-align:right;">{{D['첫째상황'][7]}}</td>
				<td style="text-align:right;">{{D['첫째상황'][8]}}</td>
				<td style="text-align:right;">{{D['첫째상황'][9]}}</td>
				<td style="text-align:right;">{{D['첫째상황'][10]}}</td>
				<td style="text-align:right;">전략매도</td>
				<td style="text-align:right;">50</td>
				<td style="text-align:right;">32.12</td>
				<td style="text-align:right;">전략매수</td>
				<td style="text-align:right;">50</td>
				<td style="text-align:right;">32.12</td>
			</tr>

			<tr>
				<td style="text-align:center;">둘째계좌</td>
				<td style="text-align:right;">{{D['첫째상황'][0]}}</td>
				<td style="text-align:right;">{{D['둘째상황'][1]}}</td>
				<td style="text-align:right;">{{D['둘째상황'][2]|safe}}</td>
				<td style="text-align:right;">{{D['둘째상황'][3]|safe}}</td>
				<td style="text-align:right;">{{D['둘째상황'][4]}}</td>
				<td style="text-align:right;">{{D['둘째상황'][5]}}</td>
				<td style="text-align:right;">{{D['둘째상황'][6]}}</td>
				<td style="text-align:right;">{{D['둘째상황'][7]}}</td>
				<td style="text-align:right;">{{D['둘째상황'][8]}}</td>
				<td style="text-align:right;">{{D['둘째상황'][9]}}</td>
				<td style="text-align:right;">{{D['둘째상황'][10]}}</td>
				<td style="text-align:right;">전략매도</td>
				<td style="text-align:right;">50</td>
				<td style="text-align:right;">32.12</td>
				<td style="text-align:right;">전략매수</td>
				<td style="text-align:right;">50</td>
				<td style="text-align:right;">32.12</td>
			</tr>

			<tr>
				<td style="text-align:center;">셋째계좌</td>
				<td style="text-align:right;">{{D['셋째상황'][0]}}</td>
				<td style="text-align:right;">{{D['셋째상황'][1]}}</td>
				<td style="text-align:right;">{{D['셋째상황'][2]|safe}}</td>
				<td style="text-align:right;">{{D['셋째상황'][3]|safe}}</td>
				<td style="text-align:right;">{{D['셋째상황'][4]}}</td>
				<td style="text-align:right;">{{D['셋째상황'][5]}}</td>
				<td style="text-align:right;">{{D['셋째상황'][6]}}</td>
				<td style="text-align:right;">{{D['셋째상황'][7]}}</td>
				<td style="text-align:right;">{{D['셋째상황'][8]}}</td>
				<td style="text-align:right;">{{D['셋째상황'][9]}}</td>
				<td style="text-align:right;">{{D['셋째상황'][10]}}</td>
				<td style="text-align:right;">전략매도</td>
				<td style="text-align:right;">50</td>
				<td style="text-align:right;">32.12</td>
				<td style="text-align:right;">전략매수</td>
				<td style="text-align:right;">50</td>
				<td style="text-align:right;">32.12</td>
			</tr>
		</tbody>
	</table>
</div>


<script>

	// 챠트 그리기
	const ctx = $id('myChart');
	const ctx2= $id('myChart2');
	
	ctx.style.backgroundColor = '#33363b';
	ctx.style.border = '2px solid black';
	
	let labels = {{D['날자']|safe}};
	const data = {
		labels : labels,
		datasets : [
			{
				label:' 종가',
				data : {{D['종가']|safe}},
				borderColor:'white', borderWidth:2,borderDash: [2,2], pointStyle:'circle', pointRadius:0, 
				lineTension:0.2
	
			},
			{
				label:' 첫째',
				data : {{D['첫째']|safe}},
				pointStyle:'circle', borderWidth:4,pointRadius:0,pointHoverRadius:15,borderColor:'#f78181',backgroundColor:'#f78181',
				lineTension:0.2
	
			},
			{
				label:' 둘째',
				data : {{D['둘째']|safe}},
				pointStyle:'circle', borderWidth:4,pointRadius:0,pointHoverRadius:15,borderColor:'#58ACFA',
				lineTension:0.2
	
			},
	
			{
				label:' 셋째',
				data : {{D['셋째']|safe}},
				pointStyle:'circle', borderWidth:4,pointRadius:0,pointHoverRadius:15,borderColor:'yellow',
				lineTension:0.2
	
			}
	
		]   
	};
	const options = {
		animation : {duration:1000},
		plugins : { legend: {display:false}},
		responsive:false,
		layout:{padding:20},
		scales:{
			x:{ ticks : {color:'gray'}, grid:{color:'#272727'}},
			y:{ ticks : {color:'lightgray'}, grid:{color:'#272727'} }
		}
	};
	const config  = {type:'line',data:data,options:options};
	const myChart = new Chart(ctx, config); 
	//

	const labels2 = ['첫째','둘째','셋째','종합'];
	const data2 = {
	labels: labels2,
	datasets: [{
		label: ' 자산배분비율 ',
		data: [{{D['첫째상황'][8]|safe}},{{D['둘째상황'][8]|safe}},{{D['셋째상황'][8]|safe}},{{D['total_rate']|safe}}],
		backgroundColor: ['rgba(255, 99, 132, 0.4)','rgba(54, 162, 235, 0.4)','rgba(255, 205, 86, 0.4)','rgba(75, 192, 192, 0.4)'],
		borderColor: ['rgb(255, 99, 132)','rgb(54, 162, 235)','rgb(255, 205, 86)','rgb(75, 192, 192)'],
		borderWidth: 1
	}]
	};

	const config2 = {
	type: 'bar',
	data: data2,
	plugins:[ChartDataLabels],
	options: {
		animation : {duration:1000},
		plugins : { legend: {display:false},
					tooltip : {enabled:false},
					datalabels : {color:'white', anchor:'start', align:'end', offset: 3, font:{size:14}}			
		},
		scales: {
		y: {
			beginAtZero: true
		}
		}
	},
	};

	const myChart2 = new Chart(ctx2, config2); 

	</script>
	
	
{% endblock %}
